Procédure pour installer gcloud CLI sur Debian/Ubuntu

sudo apt-get update
sudo apt-get install apt-transport-https ca-certificates gnupg curl sudo
echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key --keyring /usr/share/keyrings/cloud.google.gpg add -
sudo apt-get update && sudo apt-get install google-cloud-cli

GCP Modules obligatoire à activer :

- Computer Engine API

Comment obtenir une clé de service pour le projet:

GCP/IAM (Console)

Dans "Comptes de Service" :

Créer un compte de service : 
1) Entrer un nom du compte
2) Attribuer le role : Editeur
3) Cliquer sur créer.

Créer la clé de service :

- Cliquer sur le compte qu'on vient de créer, et sur l'onglet "Clés"
- Cliquer sur "Ajouter une clé" / Créer une clé
- Selectionner le type en "json" et cliquer sur créer
- Sauvegarder la clé dans la racine du projet
- renommer la clé en : "service_account.json"

Configuration de gcloud CLI:

Info : Pour obtenir la liste des projets:
gcloud projects list

1) Pour utiliser le projet pour lancer le script
gcloud config set project <nom_projet>

2) Ajouter sa clé rsa public dans GCP :
- Aller dans le dossier où est situé votre clé rsa public
- Executer les commandes suivantes : 
    gcloud compute os-login ssh-keys add --key-file=id_rsa.pub
    gcloud compute config-ssh --ssh-key-file=id_rsa

Source : 

https://github.com/pcasteran/terraform-graph-beautifier
https://galaxy.ansible.com/code_egg/openlitespeed_wordpress
